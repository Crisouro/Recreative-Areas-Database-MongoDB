db.createCollection('usuarios')
db.usuarios.createIndex({NIF: 1}, {unique: 1})

VAL = {
    bsonType: "object",
    description: "Documento que describe a los usuarios",
    required: ["ID", "NOMBRE", "EMAIL", "TELEFONO"],
    properties: {
        NIF: {
            bsonType: "string",
            description: "El ID debe ser string y es parte de la PK"
        },
        NOMBRE: {
            bsonType: "string",
            description: "El NOMBRE debe ser string y debe aparecer siempre"
        },
        EMAIL: {
            bsonType: "array",
            description: "El EMAIL debe ser un array de string",
            items: {
                bsonType: "string",
                description: "Cada elemento debe ser string"
            }
        },
        TELEFONO: {
            bsonType: "array", 
            description: "El TELEFONO debe ser un array de string",
            items: {
                bsonType: "string",
                description: "Cada elemento debe ser string"
            }
        }
    }
}

db.runCommand({ "collMod": "usuarios", "validator": { $jsonSchema: VAL } })

